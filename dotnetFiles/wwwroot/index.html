<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transaction Dashboard</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>Transaction Dashboard</h1>
        <nav>
            <a href="#">Home</a>
            <a href="#">Transactions</a>
            <a href="#">Profile</a>
        </nav>
    </header>

    <main>
        <section class="transaction-form">
            <h2>Add Transaction</h2>
            <form id="transactionForm">
                <label for="name">Name:</label>
                <input type="text" id="name" placeholder="Recipient Name" required>

                <label for="amount">Amount:</label>
                <input type="number" id="amount" placeholder="Amount $" required>

                <label for="type">Type:</label>
                <select id="type">
                    <option value="credit">Credit</option>
                    <option value="debit">Debit</option>
                </select>

                <button type="submit">Add Transaction</button>
            </form>
        </section>

        <section class="transaction-table">
            <h2>Transactions</h2>
            <table>
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Name</th>
                        <th>Amount</th>
                        <th>Type</th>
                    </tr>
                </thead>
                <tbody id="transactionsBody">
                    <!-- Transactions will appear here -->
                </tbody>
            </table>
        </section>
    </main>

    <footer>
        <p>&copy; 2025 Transaction Dashboard. All rights reserved.</p>
    </footer>

    <script>
const form = document.getElementById('transactionForm');
const tbody = document.getElementById('transactionsBody');

// Load existing transactions
async function loadTransactions() {
    const response = await fetch('https://localhost:5027/transactions'); // your backend URL
    const data = await response.json();

    tbody.innerHTML = ''; // clear table
    data.forEach(t => {
        const row = document.createElement('tr');
        row.innerHTML = `
            <td>${new Date(t.date).toLocaleDateString()}</td>
            <td>${t.name}</td>
            <td>$${t.amount}</td>
            <td>${t.type}</td>
        `;
        tbody.appendChild(row);
    });
}

// Submit new transaction
form.addEventListener('submit', async function(e) {
    e.preventDefault();

    const transaction = {
        name: document.getElementById('name').value,
        amount: parseFloat(document.getElementById('amount').value),
        type: document.getElementById('type').value,
        date: new Date().toISOString()
    };

    await fetch('https://localhost:5027/transactions', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(transaction)
    });

    form.reset();
    loadTransactions(); // reload table
});

// Initial load
loadTransactions();
</script>

</body>
</html>
